(window.webpackJsonp=window.webpackJsonp||[]).push([[43],{372:function(t,s,a){"use strict";a.r(s);var e=a(8),n=Object(e.a)({},(function(){var t=this,s=t._self._c;return s("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[s("h1",{attrs:{id:"docker"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#docker"}},[t._v("#")]),t._v(" Docker")]),t._v(" "),s("h2",{attrs:{id:"docker-的架构图"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#docker-的架构图"}},[t._v("#")]),t._v(" Docker 的架构图")]),t._v(" "),s("p",[s("img",{attrs:{src:"https://wwp-study-notes.oss-cn-nanjing.aliyuncs.com/imgs/Docker/01.png",alt:"01"}})]),t._v(" "),s("h2",{attrs:{id:"docker-安装"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#docker-安装"}},[t._v("#")]),t._v(" Docker 安装")]),t._v(" "),s("h3",{attrs:{id:"安装步骤"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#安装步骤"}},[t._v("#")]),t._v(" 安装步骤")]),t._v(" "),s("p",[s("a",{attrs:{href:"https://docs.docker.com/engine/install/centos/",target:"_blank",rel:"noopener noreferrer"}},[t._v("官网安装参考手册"),s("OutboundLink")],1)]),t._v(" "),s("blockquote",[s("p",[t._v("环境说明：我们使用的是 "),s("code",[t._v("CentOS 7 (64-bit)")]),t._v("目前，"),s("code",[t._v("CentOS")]),t._v(" 仅发行版本中的内核支持 Docker。Docker 运行在 "),s("code",[t._v("CentOS 7")]),t._v(" 上，要求系统为 64 位、系统内核版本为 "),s("code",[t._v("3.10")]),t._v(" 以上。")])]),t._v(" "),s("div",{staticClass:"language-shell extra-class"},[s("pre",{pre:!0,attrs:{class:"language-shell"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 查看自己的内核")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("uname")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("-r")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 查看版本信息")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("cat")]),t._v(" /etc/os-release\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# yum安装gcc相关环境（需要确保 虚拟机可以上外网 ）")]),t._v("\nyum "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("-y")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("install")]),t._v(" gcc\nyum "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("-y")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("install")]),t._v(" gcc-c++\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 卸载旧版本")]),t._v("\nyum remove "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("docker")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("\n                docker-client "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("\n                docker-client-latest "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("\n                docker-common "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("\n                docker-latest "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("\n                docker-latest-logrotate "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("\n                docker-logrotate "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("\n                docker-engine\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 安装需要的软件包")]),t._v("\nyum "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("install")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("-y")]),t._v(" yum-utils\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 设置镜像仓库使用国内的")]),t._v("\nyum-config-manager --add-repo http://mirrors.aliyun.com/docker- ce/linux/centos/docker-ce.repo\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 更新yum软件包索引")]),t._v("\nyum makecache fast\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 安装 Docker CE")]),t._v("\nyum "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("install")]),t._v(" docker-ce docker-ce-cli containerd.io\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 启动 Docker")]),t._v("\nsystemctl start "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("docker")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 测试命令")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("docker")]),t._v(" version\n"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("docker")]),t._v(" run hello-world\n"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("docker")]),t._v(" images\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 卸载 docker")]),t._v("\nsystemctl stop "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("docker")]),t._v("\nyum "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("-y")]),t._v(" remove docker-ce docker-ce-cli containerd.io\n"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("rm")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("-rf")]),t._v(" /var/lib/docker\n")])])]),s("h3",{attrs:{id:"阿里云镜像加速"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#阿里云镜像加速"}},[t._v("#")]),t._v(" 阿里云镜像加速")]),t._v(" "),s("ol",[s("li",[t._v("注册一个属于自己的阿里云账户(可复用淘宝账号)")]),t._v(" "),s("li",[t._v("进入管理控制台设置密码，开通")]),t._v(" "),s("li",[t._v("查看镜像加速器")])]),t._v(" "),s("p",[s("img",{attrs:{src:"https://wwp-study-notes.oss-cn-nanjing.aliyuncs.com/imgs/Docker/02.jpg",alt:"02"}})]),t._v(" "),s("ol",{attrs:{start:"4"}},[s("li",[t._v("配置镜像加速")])]),t._v(" "),s("div",{staticClass:"language-shell extra-class"},[s("pre",{pre:!0,attrs:{class:"language-shell"}},[s("code",[s("span",{pre:!0,attrs:{class:"token function"}},[t._v("sudo")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("mkdir")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("-p")]),t._v(" /etc/docker\n"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("sudo")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("tee")]),t._v(" /etc/docker/daemon.json "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<<-")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('\'EOF\'\n{\n    "registry-mirrors": ["https://j21nbvsk.mirror.aliyuncs.com"]\n}\nEOF')]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("sudo")]),t._v(" systemctl daemon-reload\n"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("sudo")]),t._v(" systemctl restart "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("docker")]),t._v("\n")])])]),s("h3",{attrs:{id:"测试"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#测试"}},[t._v("#")]),t._v(" 测试")]),t._v(" "),s("div",{staticClass:"language-shell extra-class"},[s("pre",{pre:!0,attrs:{class:"language-shell"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 启动hello-world")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("docker")]),t._v(" run hello-world\n")])])]),s("p",[s("strong",[t._v("run 干了什么？")])]),t._v(" "),s("p",[s("img",{attrs:{src:"https://wwp-study-notes.oss-cn-nanjing.aliyuncs.com/imgs/Docker/03.jpg",alt:"03"}})]),t._v(" "),s("h2",{attrs:{id:"docker-常用命令"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#docker-常用命令"}},[t._v("#")]),t._v(" Docker 常用命令")]),t._v(" "),s("h3",{attrs:{id:"帮助命令"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#帮助命令"}},[t._v("#")]),t._v(" 帮助命令")]),t._v(" "),s("div",{staticClass:"language-shell extra-class"},[s("pre",{pre:!0,attrs:{class:"language-shell"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("## 帮助命令")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("docker")]),t._v(" version "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("## 显示 Docker 版本信息")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("docker")]),t._v(" info  "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("## 显示 Docker 系统信息，包括镜像和容器数")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("docker")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("--help")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("## 帮助")]),t._v("\n")])])]),s("h3",{attrs:{id:"镜像命令"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#镜像命令"}},[t._v("#")]),t._v(" 镜像命令")]),t._v(" "),s("p",[s("strong",[t._v("docker images")])]),t._v(" "),s("div",{staticClass:"language-shell extra-class"},[s("pre",{pre:!0,attrs:{class:"language-shell"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("## 列出本地主机上的镜像")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("docker")]),t._v(" images\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("## 可选项")]),t._v("\n-a： 列出本地所有镜像\n-q： 只显示镜像id\n--digests： 显示镜像的摘要信息\n")])])]),s("p",[s("strong",[t._v("docker search")])]),t._v(" "),s("div",{staticClass:"language-shell extra-class"},[s("pre",{pre:!0,attrs:{class:"language-shell"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("## 搜索镜像")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("docker")]),t._v(" search mysql\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("## 可选项")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("--filter")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("stars"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("50")]),t._v(" ： 列出收藏数不小于指定值的镜像。\n")])])]),s("p",[s("strong",[t._v("docker pull")])]),t._v(" "),s("div",{staticClass:"language-shell extra-class"},[s("pre",{pre:!0,attrs:{class:"language-shell"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("## 下载镜像")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("docker")]),t._v(" pull mysql\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("## 指定版本下载")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("docker")]),t._v(" pull mysql:5.7\n")])])]),s("p",[s("strong",[t._v("docker rmi")])]),t._v(" "),s("div",{staticClass:"language-shell extra-class"},[s("pre",{pre:!0,attrs:{class:"language-shell"}},[s("code",[s("span",{pre:!0,attrs:{class:"token function"}},[t._v("docker")]),t._v(" rmi "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("-f")]),t._v(" 镜像id "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("## 删除单个")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("docker")]),t._v(" rmi "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("-f")]),t._v(" 镜像名:tag 镜像名:tag "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("## 删除多个")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("docker")]),t._v(" rmi "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("-f")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token variable"}},[s("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$(")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("docker")]),t._v(" images "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("-qa")]),s("span",{pre:!0,attrs:{class:"token variable"}},[t._v(")")])]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("## 删除全部")]),t._v("\n")])])]),s("h3",{attrs:{id:"容器命令"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#容器命令"}},[t._v("#")]),t._v(" 容器命令")]),t._v(" "),s("p",[s("strong",[t._v("说明：有镜像才能创建容器，这里使用 centos 的镜像来测试，就是虚拟一个 centos ！")])]),t._v(" "),s("div",{staticClass:"language-shell extra-class"},[s("pre",{pre:!0,attrs:{class:"language-shell"}},[s("code",[s("span",{pre:!0,attrs:{class:"token function"}},[t._v("docker")]),t._v(" pull centos\n")])])]),s("p",[s("strong",[t._v("新建容器并启动")])]),t._v(" "),s("div",{staticClass:"language-shell extra-class"},[s("pre",{pre:!0,attrs:{class:"language-shell"}},[s("code",[s("span",{pre:!0,attrs:{class:"token function"}},[t._v("docker")]),t._v(" run "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("OPTIONS"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" IMAGE "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("COMMAND"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("ARG"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("..")]),t._v("."),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("## 常用参数说明")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("--name")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"Name"')]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("## 给容器指定一个名字")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("-d")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("## 后台方式运行容器，并返回容器的id！")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("-i")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("## 以交互模式运行容器，通过和 -t 一起使用")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("-t")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("## 给容器重新分配一个终端，通常和 -i 一起使用")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("-P")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("## 随机端口映射（大写）")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("-p")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("## 指定端口映射（小结），一般可以有四种写法")]),t._v("\n    ip:hostPort:containerPort\n    ip::containerPort\n    hostPort:containerPort "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("常用"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    containerPort\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("## 测试")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("docker")]),t._v(" images\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("## 使用centos进行用交互模式启动容器，在容器内执行/bin/bash命令！")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("docker")]),t._v(" run "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("-it")]),t._v(" centos /bin/bash\n"),s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("exit")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("## 使用 exit 退出容器")]),t._v("\n")])])]),s("p",[s("strong",[t._v("列出所有运行的容器")])]),t._v(" "),s("div",{staticClass:"language-shell extra-class"},[s("pre",{pre:!0,attrs:{class:"language-shell"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("## 命令")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("docker")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("ps")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("OPTIONS"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("## 常用参数说明")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("-a")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("## 列出当前所有正在运行的容器 + 历史运行过的容器")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("-l")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("## 显示最近创建的容器")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("-n")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("? "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("## 显示最近n个创建的容器")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("-q")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("## 静默模式，只显示容器编号。")]),t._v("\n")])])]),s("p",[s("strong",[t._v("退出容器")])]),t._v(" "),s("div",{staticClass:"language-shell extra-class"},[s("pre",{pre:!0,attrs:{class:"language-shell"}},[s("code",[s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("exit")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("## 容器停止退出")]),t._v("\nctrl+P+Q "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("## 容器不停止退出")]),t._v("\n")])])]),s("p",[s("strong",[t._v("启动停止容器")])]),t._v(" "),s("div",{staticClass:"language-shell extra-class"},[s("pre",{pre:!0,attrs:{class:"language-shell"}},[s("code",[s("span",{pre:!0,attrs:{class:"token function"}},[t._v("docker")]),t._v(" start "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("容器id or 容器名"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("## 启动容器")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("docker")]),t._v(" restart "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("容器id or 容器名"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("## 重启容器")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("docker")]),t._v(" stop "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("容器id or 容器名"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("## 停止容器")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("docker")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("kill")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("容器id or 容器名"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("## 强制停止容器")]),t._v("\n")])])]),s("p",[s("strong",[t._v("删除容器")])]),t._v(" "),s("div",{staticClass:"language-shell extra-class"},[s("pre",{pre:!0,attrs:{class:"language-shell"}},[s("code",[s("span",{pre:!0,attrs:{class:"token function"}},[t._v("docker")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("rm")]),t._v(" 容器id "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("## 删除指定容器")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("docker")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("rm")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("-f")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token variable"}},[s("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$(")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("docker")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("ps")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("-a")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("-q")]),s("span",{pre:!0,attrs:{class:"token variable"}},[t._v(")")])]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("## 删除所有容器")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("docker")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("ps")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("-a")]),t._v(" -q"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("xargs")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("docker")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("rm")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("## 删除所有容器")]),t._v("\n")])])]),s("h3",{attrs:{id:"常用其他命令"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#常用其他命令"}},[t._v("#")]),t._v(" 常用其他命令")]),t._v(" "),s("p",[s("strong",[t._v("后台启动容器")])]),t._v(" "),s("div",{staticClass:"language-shell extra-class"},[s("pre",{pre:!0,attrs:{class:"language-shell"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("## 命令")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("docker")]),t._v(" run "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("-d")]),t._v(" 容器名\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("## 例子")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("docker")]),t._v(" run "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("-d")]),t._v(" centos "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("## 启动centos，使用后台方式启动")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("## 问题： 使用docker ps 查看，发现容器已经退出了！")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("## 解释：Docker容器后台运行，就必须有一个前台进程，容器运行的命令如果不是那些一直挂起的命 令，就会自动退出。")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("## 比如，你运行了nginx服务，但是docker前台没有运行应用，这种情况下，容器启动后，会立即自 杀，因为他觉得没有程序了，所以最好的情况是，将你的应用使用前台进程的方式运行启动。")]),t._v("\n")])])]),s("p",[s("strong",[t._v("查看日志")])]),t._v(" "),s("div",{staticClass:"language-shell extra-class"},[s("pre",{pre:!0,attrs:{class:"language-shell"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("## 命令")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("docker")]),t._v(" logs "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("-f")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("-t")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("--tail")]),t._v(" 容器id\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("## 例子：我们启动 centos，并编写一段脚本来测试玩玩！最后查看日志")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("docker")]),t._v(" run "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("-d")]),t._v(" centos /bin/sh "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("-c")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"while true;do echo kuangshen;sleep 1;done"')]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("docker")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("ps")]),t._v("\nCONTAINER ID      IMAGE\nc8530dbbe3b4      centos\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("## -t 显示时间戳")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("## -f 打印最新的日志")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("## --tail 数字 显示多少条！")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("docker")]),t._v(" logs "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("-tf")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("--tail")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("10")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("CONTAINERID"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n")])])]),s("p",[s("strong",[t._v("查看容器中运行的进程信息，支持 ps 命令参数")]),t._v("。")]),t._v(" "),s("div",{staticClass:"language-shell extra-class"},[s("pre",{pre:!0,attrs:{class:"language-shell"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("## 命令")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("docker")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("top")]),t._v(" 容器id\n")])])]),s("p",[s("strong",[t._v("查看容器/镜像的元数据")])]),t._v(" "),s("div",{staticClass:"language-shell extra-class"},[s("pre",{pre:!0,attrs:{class:"language-shell"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("## 命令")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("docker")]),t._v(" inspect 容器id\n")])])]),s("p",[s("strong",[t._v("进入正在运行的容器")])]),t._v(" "),s("div",{staticClass:"language-shell extra-class"},[s("pre",{pre:!0,attrs:{class:"language-shell"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("## 命令1")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("docker")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("exec")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("-it")]),t._v(" 容器id bashShell\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("## 测试1")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("docker")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("ps")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("docker")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("exec")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("-it")]),t._v(" c8530dbbe3b4 /bin/bash\n"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("ps")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("-ef")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("## 命令2")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("docker")]),t._v(" attach 容器id\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("## 测试2")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("docker")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("exec")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("-it")]),t._v(" c8530dbbe3b4 /bin/bash\n"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("ps")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("-ef")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("## 区别")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("## exec 是在容器中打开新的终端，并且可以启动新的进程")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("## attach 直接进入容器启动命令的终端，不会启动新的进程")]),t._v("\n")])])]),s("p",[s("strong",[t._v("从容器内拷贝文件到主机上")])]),t._v(" "),s("div",{staticClass:"language-shell extra-class"},[s("pre",{pre:!0,attrs:{class:"language-shell"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("## 命令")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("docker")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("cp")]),t._v(" 容器id:容器内路径 目的主机路径\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("## 测试")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("## 容器内执行，创建一个文件测试")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("cd")]),t._v(" /home\n"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("touch")]),t._v(" f1\n"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("ls")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("exit")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("## linux复制查看，是否复制成功")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("docker")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("cp")]),t._v(" c8530dbbe3b4:/home/f1 /home\n"),s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("cd")]),t._v(" /home\n"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("ls")]),t._v("\n")])])]),s("h3",{attrs:{id:"常用命令"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#常用命令"}},[t._v("#")]),t._v(" 常用命令")]),t._v(" "),s("p",[s("img",{attrs:{src:"https://wwp-study-notes.oss-cn-nanjing.aliyuncs.com/imgs/Docker/1.png",alt:"1"}})]),t._v(" "),s("table",[s("thead",[s("tr",[s("th",[t._v("命令")]),t._v(" "),s("th",[t._v("描述")])])]),t._v(" "),s("tbody",[s("tr",[s("td",[t._v("attach")]),t._v(" "),s("td",[t._v("连接指定运行镜像")])]),t._v(" "),s("tr",[s("td",[t._v("build")]),t._v(" "),s("td",[t._v("通过 Dockerfile 定制镜像")])]),t._v(" "),s("tr",[s("td",[t._v("commit")]),t._v(" "),s("td",[t._v("提交当前容器为新的镜像")])]),t._v(" "),s("tr",[s("td",[t._v("cp")]),t._v(" "),s("td",[t._v("从容器中拷贝指定文件或者目录到宿主机中")])]),t._v(" "),s("tr",[s("td",[t._v("create")]),t._v(" "),s("td",[t._v("创建一个新的容器，同 run，但不启动容器")])]),t._v(" "),s("tr",[s("td",[t._v("diff")]),t._v(" "),s("td",[t._v("查看 docker 容器变化")])]),t._v(" "),s("tr",[s("td",[t._v("events")]),t._v(" "),s("td",[t._v("从 docker 服务获取容器实时事件")])]),t._v(" "),s("tr",[s("td",[t._v("exec")]),t._v(" "),s("td",[t._v("在已存在的容器上运行命令")])]),t._v(" "),s("tr",[s("td",[t._v("export")]),t._v(" "),s("td",[t._v("导出容器的内容流作为一个 tar 归档文件[对应 import]")])]),t._v(" "),s("tr",[s("td",[t._v("history")]),t._v(" "),s("td",[t._v("展示一个镜像形成历史")])]),t._v(" "),s("tr",[s("td",[t._v("images")]),t._v(" "),s("td",[t._v("列出系统当前镜像")])]),t._v(" "),s("tr",[s("td",[t._v("import")]),t._v(" "),s("td",[t._v("从 tar 包中的内容创建一个新的文件系统映像[对应 export]")])]),t._v(" "),s("tr",[s("td",[t._v("info")]),t._v(" "),s("td",[t._v("显示系统相关信息")])]),t._v(" "),s("tr",[s("td",[t._v("inspect")]),t._v(" "),s("td",[t._v("查看容器详细信息")])]),t._v(" "),s("tr",[s("td",[t._v("kill")]),t._v(" "),s("td",[t._v("kill 指定 docker 容器")])]),t._v(" "),s("tr",[s("td",[t._v("load")]),t._v(" "),s("td",[t._v("从一个 tar 包中加载一个镜像[对应 save]")])]),t._v(" "),s("tr",[s("td",[t._v("login")]),t._v(" "),s("td",[t._v("注册或者登陆一个 docker 源服务器")])]),t._v(" "),s("tr",[s("td",[t._v("logout")]),t._v(" "),s("td",[t._v("从当前 Docker registry 退出")])]),t._v(" "),s("tr",[s("td",[t._v("logs")]),t._v(" "),s("td",[t._v("输出当前容器日志信息")])]),t._v(" "),s("tr",[s("td",[t._v("port")]),t._v(" "),s("td",[t._v("查看映射端口对应的容器内部源端口")])]),t._v(" "),s("tr",[s("td",[t._v("pause")]),t._v(" "),s("td",[t._v("暂停容器")])]),t._v(" "),s("tr",[s("td",[t._v("ps")]),t._v(" "),s("td",[t._v("列出容器列表")])]),t._v(" "),s("tr",[s("td",[t._v("pull")]),t._v(" "),s("td",[t._v("从 docker 镜像源服务器拉取指定镜像或者库镜像")])]),t._v(" "),s("tr",[s("td",[t._v("push")]),t._v(" "),s("td",[t._v("推送指定镜像或者库镜像至 docker 源服务器")])]),t._v(" "),s("tr",[s("td",[t._v("restart")]),t._v(" "),s("td",[t._v("重启运行的容器")])]),t._v(" "),s("tr",[s("td",[t._v("rm")]),t._v(" "),s("td",[t._v("移除一个或者多个容器")])]),t._v(" "),s("tr",[s("td",[t._v("rmi")]),t._v(" "),s("td",[t._v("移除一个或多个镜像[无容器使用该镜像才可删除，否则需删除相关容器才可继续或-f 强制删除]")])]),t._v(" "),s("tr",[s("td",[t._v("run")]),t._v(" "),s("td",[t._v("创建一个新的容器并运行一个命令")])]),t._v(" "),s("tr",[s("td",[t._v("save")]),t._v(" "),s("td",[t._v("保存一个镜像为一个 tar 包[对应 load]")])]),t._v(" "),s("tr",[s("td",[t._v("search")]),t._v(" "),s("td",[t._v("在 docker hub 中搜索镜像")])]),t._v(" "),s("tr",[s("td",[t._v("start")]),t._v(" "),s("td",[t._v("启动容器")])]),t._v(" "),s("tr",[s("td",[t._v("stop")]),t._v(" "),s("td",[t._v("停止容器")])]),t._v(" "),s("tr",[s("td",[t._v("tag")]),t._v(" "),s("td",[t._v("给源中镜像打标签")])]),t._v(" "),s("tr",[s("td",[t._v("top")]),t._v(" "),s("td",[t._v("查看容器中运行的进程信息")])]),t._v(" "),s("tr",[s("td",[t._v("unpause")]),t._v(" "),s("td",[t._v("取消暂停容器")])]),t._v(" "),s("tr",[s("td",[t._v("version")]),t._v(" "),s("td",[t._v("查看 docker 版本号")])]),t._v(" "),s("tr",[s("td",[t._v("wait")]),t._v(" "),s("td",[t._v("截取容器停止时的退出状态值")])])])]),t._v(" "),s("h2",{attrs:{id:"安装示例"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#安装示例"}},[t._v("#")]),t._v(" 安装示例")]),t._v(" "),s("h3",{attrs:{id:"安装-nginx"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#安装-nginx"}},[t._v("#")]),t._v(" 安装 Nginx")]),t._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 1、搜索镜像")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("docker")]),t._v(" search nginx\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 2、拉取镜像")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("docker")]),t._v(" pull nginx\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 3、启动容器")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("docker")]),t._v(" images\n"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("docker")]),t._v(" run "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("-d")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("--name")]),t._v(" mynginx "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("-p")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("3500")]),t._v(":80 nginx\n"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("docker")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("ps")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 4、测试访问")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("curl")]),t._v(" localhost:3500\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 5、进入容器")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("docker")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("exec")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("-it")]),t._v(" mynginx /bin/bash\n"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("whereis")]),t._v(" nginx "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("## 寻找nginx")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# nginx: /usr/sbin/nginx /usr/lib/nginx /etc/nginx /usr/share/nginx")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("cd")]),t._v(" /usr/share/nginx "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("## nginx 的路径")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("ls")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# html")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("cd")]),t._v(" html "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("## 首页的位置")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("ls")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 50x.html index.html")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("cat")]),t._v(" index.html\n")])])]),s("h3",{attrs:{id:"安装-tomcat"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#安装-tomcat"}},[t._v("#")]),t._v(" 安装 tomcat")]),t._v(" "),s("div",{staticClass:"language-shell extra-class"},[s("pre",{pre:!0,attrs:{class:"language-shell"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("## 官方文档解释")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("## -it ：交互模式")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("## --rm：容器启动成功并退出以后容器就自动移除，一般在测试情况下使用！")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("docker")]),t._v(" run "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("-it")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("--rm")]),t._v(" tomcat:9.0\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("## 1、下载tomcat镜像")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("docker")]),t._v(" pull tomcat\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("## 2、启动")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("docker")]),t._v(" run "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("-d")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("-p")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("8080")]),t._v(":8080 "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("--name")]),t._v(" tomcat9 tomcat\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("## 3、进入tomcat")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("docker")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("exec")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("-it")]),t._v(" tomcat9 /bin/bash\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("## 可以使用容器卷将容器内文件和 Linux 进行映射挂载")]),t._v("\n")])])]),s("h3",{attrs:{id:"安装-mysql"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#安装-mysql"}},[t._v("#")]),t._v(" 安装 mysql")]),t._v(" "),s("div",{staticClass:"language-shell extra-class"},[s("pre",{pre:!0,attrs:{class:"language-shell"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("## 1、搜索镜像")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("docker")]),t._v(" search mysql\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("## 2、拉取镜像")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("docker")]),t._v(" pull mysql:5.7\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("## 3、启动容器 -e 环境变量！")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("## 注意： mysql的数据应该不丢失！先体验下 -v 挂载卷！ 参考官方文档")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("docker")]),t._v(" run "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("-d")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("-p")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("3310")]),t._v(":3306 "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("-v")]),t._v(" /home/mysql/conf:/etc/mysql/conf.d "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("-v")]),t._v(" /home/mysql/data:/var/lib/mysql "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("-e")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("MYSQL_ROOT_PASSWORD")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("123456")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("--name")]),t._v(" mysql01 mysql:5.7\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("## 4、使用本地的sqlyog连接测试一下 3310")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("## 5、查看本地的 /home/mysql 目录")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("pwd")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#/home/mysql/data")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("ls")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("## 可以看到我们刚刚建立的mysql数据库在本地存储着")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("## 6、删除mysql容器")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("docker")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("rm")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("-f")]),t._v(" mysql01 "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("## 删除容器，然后发现远程连接失败！")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("ls")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("## 可以看到我们刚刚建立的mysql数据库在本地存储着")]),t._v("\n")])])]),s("h3",{attrs:{id:"部署-es-kibana"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#部署-es-kibana"}},[t._v("#")]),t._v(" 部署 es + kibana")]),t._v(" "),s("div",{staticClass:"language-shell extra-class"},[s("pre",{pre:!0,attrs:{class:"language-shell"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("## 我们启动es这种容器需要考虑几个问题")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 1、端口暴露问题 9200、9300")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 2、数据卷的挂载问题 data、plugins、conf")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v('# 3、吃内存 - "ES_JAVA_OPTS=-Xms512m -Xmx512m"')]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("## 扩展命令")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("docker")]),t._v(" stats 容器id "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("## 查看容器的cpu内存和网络状态")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("## 1、启动es测试")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("docker")]),t._v(" run "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("-d")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("--name")]),t._v(" elasticsearch "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("-p")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("9200")]),t._v(":9200 "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("-p")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("9300")]),t._v(":9300 "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("-e")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"discovery.type=single-node"')]),t._v(" elasticsearch:7.6.2\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("## 2、启动之后很卡，使用 docker stats 容器id 查看下cpu状态 ，发现占用的很大")]),t._v("\nCONTAINER ID NAME          CPU % MEM USAGE / LIMIT   MEM %\n249ae46da625 elasticsearch "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("0.00")]),t._v("% "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),t._v(".036GiB / "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),t._v(".716GiB "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("60.37")]),t._v("%\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("## 3、测试访问")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("curl")]),t._v(" localhost:9200\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("## 4、增加上内存限制启动")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("docker")]),t._v(" run "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("-d")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("--name")]),t._v(" elasticsearch "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("-p")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("9200")]),t._v(":9200 "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("-p")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("9300")]),t._v(":9300 "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("-e")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"discovery.type=single-node"')]),t._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("-e")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("ES_JAVA_OPTS")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"-Xms64m -Xmx512m"')]),t._v(" elasticsearch:7.6.2\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("## 5、启动之后，使用 docker stats 查看下cpu状态")]),t._v("\nCONTAINER ID NAME          CPU % MEM USAGE / LIMIT MEM %\nd2860684e7e4 elasticsearch "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("0.24")]),t._v("% "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("358")]),t._v(".3MiB / "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),t._v(".716GiB "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("20.40")]),t._v("%\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("## 6、测试访问，效果一样，ok！")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("curl")]),t._v(" localhost:9200\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("## 思考：如果我们要使用 kibana , 如果配置连接上我们的es呢？网络该如何配置呢？见网络部分")]),t._v("\n")])])]),s("p",[s("img",{attrs:{src:"https://wwp-study-notes.oss-cn-nanjing.aliyuncs.com/imgs/Docker/2.png",alt:"2"}})]),t._v(" "),s("h3",{attrs:{id:"部署-redis-集群"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#部署-redis-集群"}},[t._v("#")]),t._v(" 部署 Redis 集群")]),t._v(" "),s("p",[s("img",{attrs:{src:"https://wwp-study-notes.oss-cn-nanjing.aliyuncs.com/imgs/Docker/25.png",alt:"25"}})]),t._v(" "),s("div",{staticClass:"language-shell extra-class"},[s("pre",{pre:!0,attrs:{class:"language-shell"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("## 创建网卡")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("docker")]),t._v(" network create redis "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("--subnet")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("172.38")]),t._v(".0.0/16\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("## 通过脚本创建六个redis配置")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("for")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token for-or-select variable"}},[t._v("port")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("in")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token variable"}},[s("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$(")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("seq")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("6")]),s("span",{pre:!0,attrs:{class:"token variable"}},[t._v(")")])]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("do")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("mkdir")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("-p")]),t._v(" /mydata/redis/node-"),s("span",{pre:!0,attrs:{class:"token variable"}},[t._v("${port}")]),t._v("/conf\n"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("touch")]),t._v(" /mydata/redis/node-"),s("span",{pre:!0,attrs:{class:"token variable"}},[t._v("${port}")]),t._v("/conf/redis.conf\n"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("cat")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<<")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("EOF"),s("span",{pre:!0,attrs:{class:"token bash punctuation"}},[t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("/mydata/redis/node-"),s("span",{pre:!0,attrs:{class:"token variable"}},[t._v("${port}")]),t._v("/conf/redis.conf")]),t._v("\nport 6379\nbind 0 .0.0.0\ncluster-enabled yes\ncluster-config-file nodes.conf\ncluster-node-timeout 5000\ncluster-announce-ip 172 .38.0.1"),s("span",{pre:!0,attrs:{class:"token variable"}},[t._v("${port}")]),t._v("\ncluster-announce-port 6379\ncluster-announce-bus-port 16379\nappendonly yes\nEOF")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("done")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("docker")]),t._v(" run "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("-p")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("637")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token variable"}},[t._v("${port}")]),t._v(":6379 "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("-p")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("1637")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token variable"}},[t._v("${port}")]),t._v(":16379 "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("--name")]),t._v(" redis-"),s("span",{pre:!0,attrs:{class:"token variable"}},[t._v("${port}")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("-v")]),t._v(" /mydata/redis/node-"),s("span",{pre:!0,attrs:{class:"token variable"}},[t._v("${port}")]),t._v("/data:/data "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("-v")]),t._v(" /mydata/redis/node-"),s("span",{pre:!0,attrs:{class:"token variable"}},[t._v("${port}")]),t._v("/conf/redis.conf:/etc/redis/redis.conf "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("-d")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("--net")]),t._v(" redis "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("--ip")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("172")]),t._v(" .38.0.1"),s("span",{pre:!0,attrs:{class:"token variable"}},[t._v("${port}")]),t._v(" redis:5.0.9-alpine3.11 redis-server/etc/redis/redis.conf"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("## 启动 6 个容器")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("docker")]),t._v(" run "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("-p")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("6371")]),t._v(" :6379 "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("-p")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("16371")]),t._v(" :16379 "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("--name")]),t._v(" redis-1 "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("-v")]),t._v(" /mydata/redis/node-1/data:/data "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("-v")]),t._v(" /mydata/redis/node-1/conf/redis.conf:/etc/redis/redis.conf "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("-d")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("--net")]),t._v(" redis "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("--ip")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("172")]),t._v(" .38.0.11 redis:5.0.9-alpine3.11 redis-server/etc/redis/redis.conf\n\n"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("docker")]),t._v(" run "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("-p")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("6376")]),t._v(" :6379 "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("-p")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("16376")]),t._v(" :16379 "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("--name")]),t._v(" redis-6 "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("-v")]),t._v(" /mydata/redis/node-6/data:/data "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("-v")]),t._v(" /mydata/redis/node-6/conf/redis.conf:/etc/redis/redis.conf "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("-d")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("--net")]),t._v(" redis "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("--ip")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("172")]),t._v(" .38.0.16 redis:5.0.9-alpine3.11 redis-server/etc/redis/redis.conf\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("## 进入一个redis，注意这里是 sh命令")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("docker")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("exec")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("-it")]),t._v(" redis-1 /bin/sh\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("## 创建集群")]),t._v("\nredis-cli "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("--cluster")]),t._v(" create "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("172.38")]),t._v(".0.11:6379 "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("172.38")]),t._v(".0.12:6379 "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("172.38")]),t._v(".0.13:6379 "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("172.38")]),t._v(".0.14:6379 "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("172.38")]),t._v(".0.15:6379 "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("172.38")]),t._v(".0.16:6379 --cluster-replicas "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("## 连接集群")]),t._v("\nredis-cli "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("-c")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("## 查看集群信息")]),t._v("\ncluster info\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("## 查看节点")]),t._v("\ncluster nodes\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("## set a b")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("## 停止存值的容器")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("## 然后再次get a，发现依旧可以获取值")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("## 查看节点，发现高可用完全没问题")]),t._v("\n")])])]),s("h2",{attrs:{id:"docker-镜像"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#docker-镜像"}},[t._v("#")]),t._v(" Docker 镜像")]),t._v(" "),s("h3",{attrs:{id:"概述"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#概述"}},[t._v("#")]),t._v(" 概述")]),t._v(" "),s("blockquote",[s("p",[t._v("镜像是一种轻量级、可执行的独立软件包，用来打包软件运行环境和基于运行环境开发的软件，它包含\n运行某个软件所需的所有内容，包括代码、运行时、库、环境变量和配置文件。")])]),t._v(" "),s("h3",{attrs:{id:"特点"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#特点"}},[t._v("#")]),t._v(" 特点")]),t._v(" "),s("blockquote",[s("p",[t._v("Docker 镜像都是只读的，当容器启动时，一个新的可写层被加载到镜像的顶部！"),s("br"),t._v("\n这一层就是我们通常说的容器层，容器之下的都叫镜像层！")])]),t._v(" "),s("h3",{attrs:{id:"镜像-commit"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#镜像-commit"}},[t._v("#")]),t._v(" 镜像 Commit")]),t._v(" "),s("div",{staticClass:"language-shell extra-class"},[s("pre",{pre:!0,attrs:{class:"language-shell"}},[s("code",[s("span",{pre:!0,attrs:{class:"token function"}},[t._v("docker")]),t._v(" commit 提交容器副本使之成为一个新的镜像！\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("## 语法")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("docker")]),t._v(" commit "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("-m")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"提交的描述信息"')]),t._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("-a")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"作者"')]),t._v(" 容器id 要创建的目标镜像名:"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("标签名"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n")])])]),s("h2",{attrs:{id:"dockerfile"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#dockerfile"}},[t._v("#")]),t._v(" DockerFile")]),t._v(" "),s("blockquote",[s("p",[t._v("微服务打包成镜像流程：开发应用=>DockerFile=>打包为镜像=>上传到仓库（私有仓库，公有仓库）=> 下载镜像 => 启动"),s("br")])]),t._v(" "),s("p",[s("img",{attrs:{src:"https://wwp-study-notes.oss-cn-nanjing.aliyuncs.com/imgs/Docker/21.png",alt:"21"}})]),t._v(" "),s("h3",{attrs:{id:"dockerfile-概念"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#dockerfile-概念"}},[t._v("#")]),t._v(" DockerFile 概念")]),t._v(" "),s("p",[t._v("dockerfile 是用来构建 Docker 镜像的构建文件，是由一系列命令和参数构成的脚本。"),s("br"),t._v("\n构建步骤："),s("br")]),t._v(" "),s("ul",[s("li",[t._v("1、编写 DockerFile 文件")]),t._v(" "),s("li",[t._v("2、docker build 构建镜像")]),t._v(" "),s("li",[t._v("3、docker run")])]),t._v(" "),s("p",[s("a",{attrs:{href:"https://hub.docker.com/_/centos",target:"_blank",rel:"noopener noreferrer"}},[t._v("查看 centos DockerFile 文件"),s("OutboundLink")],1)]),t._v(" "),s("h3",{attrs:{id:"dockerfile-构建过程"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#dockerfile-构建过程"}},[t._v("#")]),t._v(" DockerFile 构建过程")]),t._v(" "),s("h4",{attrs:{id:"基础知识"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#基础知识"}},[t._v("#")]),t._v(" 基础知识")]),t._v(" "),s("ol",[s("li",[t._v("每条保留字指令都必须为大写字母且后面要跟随至少一个参数")]),t._v(" "),s("li",[t._v("指令按照从上到下，顺序执行")]),t._v(" "),s("li",[s("code",[t._v("##")]),t._v(" 表示注释")]),t._v(" "),s("li",[t._v("每条指令都会创建一个新的镜像层，并对镜像进行提交")])]),t._v(" "),s("h4",{attrs:{id:"流程"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#流程"}},[t._v("#")]),t._v(" 流程")]),t._v(" "),s("ol",[s("li",[t._v("docker 从基础镜像运行一个容器")]),t._v(" "),s("li",[t._v("执行一条指令并对容器做出修改")]),t._v(" "),s("li",[t._v("执行类似 docker commit 的操作提交一个新的镜像层")]),t._v(" "),s("li",[t._v("Docker 再基于刚提交的镜像运行一个新容器")]),t._v(" "),s("li",[t._v("执行 dockerfile 中的下一条指令直到所有指令都执行完成！")])]),t._v(" "),s("h3",{attrs:{id:"dockerfile-指令"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#dockerfile-指令"}},[t._v("#")]),t._v(" DockerFile 指令")]),t._v(" "),s("table",[s("thead",[s("tr",[s("th",[t._v("指令")]),t._v(" "),s("th",[t._v("描述")])])]),t._v(" "),s("tbody",[s("tr",[s("td",[t._v("FROM")]),t._v(" "),s("td",[t._v("基础镜像，当前新镜像是基于哪个镜像的")])]),t._v(" "),s("tr",[s("td",[t._v("MAINTAINER")]),t._v(" "),s("td",[t._v("镜像维护者的姓名混合邮箱地址")])]),t._v(" "),s("tr",[s("td",[t._v("RUN")]),t._v(" "),s("td",[t._v("容器构建时需要运行的命令")])]),t._v(" "),s("tr",[s("td",[t._v("EXPOSE")]),t._v(" "),s("td",[t._v("当前容器对外保留出的端口")])]),t._v(" "),s("tr",[s("td",[t._v("WORKDIR")]),t._v(" "),s("td",[t._v("指定在创建容器后，终端默认登录的进来工作目录，一个落脚点")])]),t._v(" "),s("tr",[s("td",[t._v("ENV")]),t._v(" "),s("td",[t._v("用来在构建镜像过程中设置环境变量")])]),t._v(" "),s("tr",[s("td",[t._v("ADD")]),t._v(" "),s("td",[t._v("将宿主机目录下的文件拷贝进镜像且 ADD 命令会自动处理 URL 和解压 tar 压缩包")])]),t._v(" "),s("tr",[s("td",[t._v("COPY")]),t._v(" "),s("td",[t._v("类似 ADD，拷贝文件和目录到镜像中！")])]),t._v(" "),s("tr",[s("td",[t._v("VOLUME")]),t._v(" "),s("td",[t._v("容器数据卷，用于数据保存和持久化工作")])]),t._v(" "),s("tr",[s("td",[t._v("CMD")]),t._v(" "),s("td",[t._v("指定一个容器启动时要运行的命令，dockerFile 中可以有多个 CMD 指令，但只有最后一个生效！")])]),t._v(" "),s("tr",[s("td",[t._v("ENTRYPOINT")]),t._v(" "),s("td",[t._v("指定一个容器启动时要运行的命令！和 CMD 一样")])]),t._v(" "),s("tr",[s("td",[t._v("ONBUILD")]),t._v(" "),s("td",[t._v("当构建一个被继承的 DockerFile 时运行命令，父镜像在被子镜像继承后，父镜像的 ONBUILD 被触发")])])])]),t._v(" "),s("h3",{attrs:{id:"实战测试"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#实战测试"}},[t._v("#")]),t._v(" 实战测试")]),t._v(" "),s("p",[s("code",[t._v("Docker Hub")]),t._v(" 中 99% 的镜像都是通过在 base 镜像（Scratch）中安装和配置需要的软件构建出来的")]),t._v(" "),s("h4",{attrs:{id:"自定义镜像"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#自定义镜像"}},[t._v("#")]),t._v(" 自定义镜像")]),t._v(" "),s("p",[s("strong",[t._v("自定义一个 centos，编写 DockerFile，使我们自己的镜像具备如下：登陆后的默认路径、vim 编辑器、查看网络配置 ifconfig 支持")])]),t._v(" "),s("p",[s("strong",[t._v("1、编写 DockerFile")])]),t._v(" "),s("div",{staticClass:"language-sh extra-class"},[s("pre",{pre:!0,attrs:{class:"language-sh"}},[s("code",[s("span",{pre:!0,attrs:{class:"token function"}},[t._v("mkdir")]),t._v(" dockerfile-test\n"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("vim")]),t._v(" mydockerfile-centos "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("## 编辑文件")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("cat")]),t._v(" mydockerfile-centos\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("## FROM centos")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("## MAINTAINER kuangshen<24736743@qq.com>")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("## ENV MYPATH /usr/local")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("## WORKDIR $MYPATH")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("## RUN yum -y install vim")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("## RUN yum -y install net-tools")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("## EXPOSE 80")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("## CMD echo $MYPATH")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v('## CMD echo "----------end--------"')]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("## CMD /bin/bash")]),t._v("\n")])])]),s("p",[s("strong",[t._v("2、构建")])]),t._v(" "),s("div",{staticClass:"language-shell extra-class"},[s("pre",{pre:!0,attrs:{class:"language-shell"}},[s("code",[s("span",{pre:!0,attrs:{class:"token function"}},[t._v("docker")]),t._v(" build "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("-f")]),t._v(" dockerfile地址 - t 新镜像名字:TAG.\n")])])]),s("blockquote",[s("p",[t._v("会看到 docker build 命令最后有一个. 表示当前目录")])]),t._v(" "),s("div",{staticClass:"language-shell extra-class"},[s("pre",{pre:!0,attrs:{class:"language-shell"}},[s("code",[s("span",{pre:!0,attrs:{class:"token function"}},[t._v("docker")]),t._v(" build "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("-f")]),t._v(" mydockerfile-centos "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("-t")]),t._v(" mycentos:0.1\n")])])]),s("p",[s("strong",[t._v("3、运行")])]),t._v(" "),s("div",{staticClass:"language-shell extra-class"},[s("pre",{pre:!0,attrs:{class:"language-shell"}},[s("code",[s("span",{pre:!0,attrs:{class:"token function"}},[t._v("docker")]),t._v(" run "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("-it")]),t._v(" 新镜像名字:TAG\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("## 测试 vim ifconfig 命令")]),t._v("\n")])])]),s("p",[s("strong",[t._v("4、列出镜像地的变更历史")])]),t._v(" "),s("div",{staticClass:"language-shell extra-class"},[s("pre",{pre:!0,attrs:{class:"language-shell"}},[s("code",[s("span",{pre:!0,attrs:{class:"token function"}},[t._v("docker")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("history")]),t._v(" 镜像名\n")])])]),s("h4",{attrs:{id:"cmd-命令"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#cmd-命令"}},[t._v("#")]),t._v(" CMD 命令")]),t._v(" "),s("div",{staticClass:"language-shell extra-class"},[s("pre",{pre:!0,attrs:{class:"language-shell"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("## 1、构建dockerfile")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("vim")]),t._v(" dockerfile-cmd-test\n"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("cat")]),t._v(" dockerfile-cmd-test\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("## FROM centos")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v('## CMD [ "ls", "-a" ]')]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("## 2、build 镜像")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("docker")]),t._v(" build "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("-f")]),t._v(" dockerfile-cmd-test "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("-t")]),t._v(" cmdtest.\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("## 3、执行 可以看到文件目录")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("docker")]),t._v(" run 554bc6952657\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("## 4、如果我们希望用 -l 列表展示信息，我们就需要加上 -l参数")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("docker")]),t._v(" run cmdtest "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("-l")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("## 报错，executable file not found。")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("## 跟在镜像名后面的是 command，运行时会替换 CMD 的默认值。")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("## 必须重新完整的输入这个命令。")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("docker")]),t._v(" run cmdtest "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("ls")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("-al")]),t._v("\n")])])]),s("h4",{attrs:{id:"entrypoint-命令"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#entrypoint-命令"}},[t._v("#")]),t._v(" ENTRYPOINT 命令")]),t._v(" "),s("div",{staticClass:"language-shell extra-class"},[s("pre",{pre:!0,attrs:{class:"language-shell"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("## 1、2、3 同 CMD")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("## 4、测试-l参数，发现可以直接使用，这里就是一种追加。")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("docker")]),t._v(" run entrypointtest "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("-l")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("## 可以看到文件列表")]),t._v("\n")])])]),s("blockquote",[s("p",[t._v("CMD 和 ENTRYPOINT 的区别")]),t._v(" "),s("p",[t._v("两个命令都是指定一个容器启动时要运行的命令"),s("br"),t._v("\nCMD：Dockerfile 中可以有多个 CMD 指令，但只有最后一个生效，CMD 会被 docker run 之后的参数替换！"),s("br"),t._v("\nENTRYPOINT：docker run 之后的参数会被当做参数传递给 ENTRYPOINT，之后形成新的命令组合！"),s("br")])]),t._v(" "),s("h4",{attrs:{id:"自定义镜像-tomcat"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#自定义镜像-tomcat"}},[t._v("#")]),t._v(" 自定义镜像 tomcat")]),t._v(" "),s("ol",[s("li",[s("code",[t._v("mkdir -p kuangshen/build/tomcat")])]),t._v(" "),s("li",[t._v("在上述目录下 "),s("code",[t._v("touch read.txt")])]),t._v(" "),s("li",[t._v("将 "),s("code",[t._v("JDK")]),t._v(" 和 "),s("code",[t._v("tomcat")]),t._v(" 安装的压缩包拷贝进上一步目录")]),t._v(" "),s("li",[t._v("在 "),s("code",[t._v("/kuangshen/build/tomcat")]),t._v(" 目录下新建一个 "),s("code",[t._v("Dockerfile")]),t._v(" 文件")])]),t._v(" "),s("div",{staticClass:"language-shell extra-class"},[s("pre",{pre:!0,attrs:{class:"language-shell"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("## vim Dockerfile")]),t._v("\n\nFROM centos\nMAINTAINER kuangshen"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("24736743")]),t._v("@qq.com"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#把宿主机当前上下文的read.txt拷贝到容器/usr/local/路径下")]),t._v("\nCOPY read.txt /usr/local/cincontainer.txt\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#把java与tomcat添加到容器中")]),t._v("\nADD jdk-8u11-linux-x64.tar.gz /usr/local/\nADD apache-tomcat-9.0.22.tar.gz /usr/local/\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#安装vim编辑器")]),t._v("\nRUN yum "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("-y")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("install")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("vim")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#设置工作访问时候的WORKDIR路径，登录落脚点")]),t._v("\nENV MYPATH /usr/local\nWORKDIR "),s("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$MYPATH")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#配置java与tomcat环境变量")]),t._v("\nENV JAVA_HOME /usr/local/jdk1.8.0_11\nENV CLASSPATH "),s("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$JAVA_HOME")]),t._v("/lib/dt.jar:"),s("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$JAVA_HOME")]),t._v("/lib/tools.jar\nENV CATALINA_HOME /usr/local/apache-tomcat-9.0.22\nENV CATALINA_BASE /usr/local/apache-tomcat-9.0.22\nENV "),s("span",{pre:!0,attrs:{class:"token environment constant"}},[t._v("PATH")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token environment constant"}},[t._v("$PATH")]),s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v(":")]),s("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$JAVA_HOME")]),t._v("/bin:"),s("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$CATALINA_HOME")]),t._v("/lib:"),s("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$CATALINA_HOME")]),t._v("/bin\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#容器运行时监听的端口")]),t._v("\nEXPOSE "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("8080")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#启动时运行tomcat")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v('## ENTRYPOINT ["/usr/local/apache-tomcat-9.0.22/bin/startup.sh" ]')]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v('## CMD ["/usr/local/apache-tomcat-9.0.22/bin/catalina.sh","run"]')]),t._v("\nCMD /usr/local/apache-tomcat-9.0.22/bin/startup.sh "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("&&")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("tail")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("-F")]),t._v("\n/usr/local/apache-tomcat-9.0.22/bin/logs/catalina.out\n")])])]),s("p",[s("strong",[t._v("当前文件状态")])]),t._v(" "),s("p",[s("img",{attrs:{src:"https://wwp-study-notes.oss-cn-nanjing.aliyuncs.com/imgs/Docker/14.png",alt:"14"}})]),t._v(" "),s("p",[s("strong",[t._v("1. 构建镜像")])]),t._v(" "),s("div",{staticClass:"language-shell extra-class"},[s("pre",{pre:!0,attrs:{class:"language-shell"}},[s("code",[s("span",{pre:!0,attrs:{class:"token function"}},[t._v("docker")]),t._v(" build "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("-t")]),t._v(" diytomcat.\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("## 查看确定构建完毕！")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("docker")]),t._v(" images\n")])])]),s("p",[s("strong",[t._v("2. 运行启动 run")])]),t._v(" "),s("div",{staticClass:"language-shell extra-class"},[s("pre",{pre:!0,attrs:{class:"language-shell"}},[s("code",[s("span",{pre:!0,attrs:{class:"token function"}},[t._v("docker")]),t._v(" run "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("-d")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("-p")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("9090")]),t._v(" :8080 "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("--name")]),t._v(" mydiytomcat "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("-v")]),t._v(" /home/kuangshen/build/tomcat/test:/usr/local/apache-tomcat-9.0.22/webapps/test "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("-v")]),t._v(" /home/kuangshen/build/tomcat/tomcat9logs/:/usr/local/apache-tomcat-9.0.22/logs "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("--privileged")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("true diytomcat\n")])])]),s("p",[s("img",{attrs:{src:"https://wwp-study-notes.oss-cn-nanjing.aliyuncs.com/imgs/Docker/13.png",alt:"13"}})]),t._v(" "),s("blockquote",[s("p",[t._v("备注：Docker 挂载主机目录 Docker 访问出现 cannot open directory .: Permission denied"),s("br"),t._v("\n解决办法：在挂载目录后多加一个--privileged=true 参数即可")])]),t._v(" "),s("p",[s("strong",[t._v("3. 验证测试访问！")])]),t._v(" "),s("div",{staticClass:"language-shell extra-class"},[s("pre",{pre:!0,attrs:{class:"language-shell"}},[s("code",[s("span",{pre:!0,attrs:{class:"token function"}},[t._v("curl")]),t._v(" localhost:9090\n")])])]),s("p",[s("strong",[t._v("4. 查看日志")])]),t._v(" "),s("div",{staticClass:"language-shell extra-class"},[s("pre",{pre:!0,attrs:{class:"language-shell"}},[s("code",[s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("cd")]),t._v(" tomcat9logs/\n"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("cat")]),t._v(" catalina.out\n")])])]),s("h3",{attrs:{id:"发布镜像"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#发布镜像"}},[t._v("#")]),t._v(" 发布镜像")]),t._v(" "),s("h4",{attrs:{id:"dockerhub"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#dockerhub"}},[t._v("#")]),t._v(" DockerHub")]),t._v(" "),s("p",[s("strong",[s("a",{attrs:{href:"https://hub.docker.com/signup",target:"_blank",rel:"noopener noreferrer"}},[t._v("注册 dockerhub"),s("OutboundLink")],1),t._v(" ，需要有一个账号")])]),t._v(" "),s("div",{staticClass:"language-shell extra-class"},[s("pre",{pre:!0,attrs:{class:"language-shell"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("## 1、查看登录命令")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("docker")]),t._v(" login "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("--help")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("## 2、登录")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("docker")]),t._v(" login "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("-u")]),t._v(" kuangshen\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("## 3、将镜像发布出去")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("docker")]),t._v(" push kuangshen/diytomcat:1.0\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("## 拒绝：请求的资源访问被拒绝")]),t._v("\ndenied: requested access to the resource is denied\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("## 问题：本地镜像名无帐号信息，解决加 tag即可")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("docker")]),t._v(" tag 251ca4419332 kuangshen/diytomcat:1.0\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("## 再次 push， ok")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("docker")]),t._v(" push kuangshen/diytomcat:1.0\n")])])]),s("h4",{attrs:{id:"阿里云镜像服务"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#阿里云镜像服务"}},[t._v("#")]),t._v(" 阿里云镜像服务")]),t._v(" "),s("ol",[s("li",[t._v("登录阿里云")]),t._v(" "),s("li",[t._v("找到容器镜像服务")]),t._v(" "),s("li",[t._v("创建命名空间")]),t._v(" "),s("li",[t._v("创建镜像仓库")]),t._v(" "),s("li",[t._v("点击进入这个镜像仓库，可以看到所有的信息")]),t._v(" "),s("li",[t._v("测试推送发布")])]),t._v(" "),s("div",{staticClass:"language-shell extra-class"},[s("pre",{pre:!0,attrs:{class:"language-shell"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("## 1、登录阿里云")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("docker")]),t._v(" login "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("--username")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("18225148644")]),t._v(" registry.cn-beijing.aliyuncs.com\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("## 2、设置 tag")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("docker")]),t._v(" tag 251ca4419332 registry.cn-beijing.aliyuncs.com/bilibili-kuangshen/kuangshen-test:v1.0\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("## 3、推送命令")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("docker")]),t._v(" push registry.cn-beijing.aliyuncs.com/bilibili-kuangshen/kuangshen-test:v1.0\n")])])]),s("ol",{attrs:{start:"7"}},[s("li",[t._v("在阿里云镜像仓库查看效果！")])]),t._v(" "),s("h2",{attrs:{id:"docker-compose"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#docker-compose"}},[t._v("#")]),t._v(" Docker Compose")]),t._v(" "),s("p",[s("a",{attrs:{href:"https://docs.docker.com/compose/",target:"_blank",rel:"noopener noreferrer"}},[t._v("Docker Compose 官方文档"),s("OutboundLink")],1)]),t._v(" "),s("p",[t._v("Compose 是用于定义和运行多容器 Docker 应用程序的工具。")]),t._v(" "),s("p",[t._v("Compose 使用的三个步骤：")]),t._v(" "),s("ol",[s("li",[t._v("使用 Dockerfile 定义应用程序的环境。")]),t._v(" "),s("li",[t._v("使用 docker-compose.yml 定义构成应用程序的服务，这样它们可以在隔离环境中一起运行。")]),t._v(" "),s("li",[t._v("最后，执行 docker-compose up 命令来启动并运行整个应用程序。")])]),t._v(" "),s("h3",{attrs:{id:"compose-安装"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#compose-安装"}},[t._v("#")]),t._v(" Compose 安装")]),t._v(" "),s("p",[t._v("Linux 上我们可以从 Github 上下载它的二进制包来使用，"),s("a",{attrs:{href:"https://github.com/docker/compose/releases",target:"_blank",rel:"noopener noreferrer"}},[t._v("最新发行的版本地址"),s("OutboundLink")],1)]),t._v(" "),s("div",{staticClass:"language-shell extra-class"},[s("pre",{pre:!0,attrs:{class:"language-shell"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 1、下载 Docker Compose")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("sudo")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("curl")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("-L")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"https://github.com/docker/compose/releases/download/v2.2.2/docker-compose-'),s("span",{pre:!0,attrs:{class:"token variable"}},[s("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$(")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("uname")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("-s")]),s("span",{pre:!0,attrs:{class:"token variable"}},[t._v(")")])]),t._v("-"),s("span",{pre:!0,attrs:{class:"token variable"}},[s("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$(")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("uname")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("-m")]),s("span",{pre:!0,attrs:{class:"token variable"}},[t._v(")")])]),t._v('"')]),t._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("-o")]),t._v(" /usr/local/bin/docker-compose\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 要安装其他版本的 Compose，请替换 v2.2.2。")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 高速安装 Docker Compose")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("sudo")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("curl")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("-L")]),t._v(" https://get.daocloud.io/docker/compose/releases/download/v2.4.1/docker-compose-"),s("span",{pre:!0,attrs:{class:"token variable"}},[s("span",{pre:!0,attrs:{class:"token variable"}},[t._v("`")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("uname")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("-s")]),s("span",{pre:!0,attrs:{class:"token variable"}},[t._v("`")])]),t._v("-"),s("span",{pre:!0,attrs:{class:"token variable"}},[s("span",{pre:!0,attrs:{class:"token variable"}},[t._v("`")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("uname")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("-m")]),s("span",{pre:!0,attrs:{class:"token variable"}},[t._v("`")])]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" /usr/local/bin/docker-compose\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 2、可执行权限应用于二进制文件")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("sudo")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("chmod")]),t._v(" +x /usr/local/bin/docker-compose\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 3、创建软链")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("sudo")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("ln")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("-s")]),t._v(" /usr/local/bin/docker-compose /usr/bin/docker-compose\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 4、测试是否安装成功")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("docker-compose")]),t._v(" version\n")])])]),s("h3",{attrs:{id:"docker-compose-常用命令"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#docker-compose-常用命令"}},[t._v("#")]),t._v(" Docker Compose 常用命令")]),t._v(" "),s("table",[s("thead",[s("tr",[s("th",[t._v("命令")]),t._v(" "),s("th",[t._v("描述")])])]),t._v(" "),s("tbody",[s("tr",[s("td",[s("code",[t._v("docker-compose build")])]),t._v(" "),s("td",[t._v("使用默认的 "),s("code",[t._v("docker-compose.yml")]),t._v(" 文件构建镜像")])]),t._v(" "),s("tr",[s("td",[s("code",[t._v("docker-compose build --no-cache")])]),t._v(" "),s("td",[t._v("不使用缓存的方式构建镜像")])]),t._v(" "),s("tr",[s("td",[s("code",[t._v("docker-compose build -f docker-compose1.yml")])]),t._v(" "),s("td",[t._v("使用指定的 "),s("code",[t._v("docker-compose1.yml")]),t._v(" 文件模板构建镜像")])]),t._v(" "),s("tr",[s("td",[s("code",[t._v("docker-compose images")])]),t._v(" "),s("td",[t._v("列出由 Compose 文件构建的镜像")])]),t._v(" "),s("tr",[s("td",[s("code",[t._v("docker-compose up -d")])]),t._v(" "),s("td",[t._v("启动所有编排容器服务")])]),t._v(" "),s("tr",[s("td",[s("code",[t._v("docker-compose ps")])]),t._v(" "),s("td",[t._v("查看正在运行中的容器")])]),t._v(" "),s("tr",[s("td",[s("code",[t._v("docker-compose ps -a")])]),t._v(" "),s("td",[t._v("查看所有编排容器，包括已停止的容器")])]),t._v(" "),s("tr",[s("td",[s("code",[t._v("docker-compose exec nginx bash")])]),t._v(" "),s("td",[t._v("进入指定容器执行命令")])]),t._v(" "),s("tr",[s("td",[s("code",[t._v("docker-compose exec web python manage.py migrate --noinput")])]),t._v(" "),s("td",[t._v("在指定容器内执行 Django 数据库迁移命令")])]),t._v(" "),s("tr",[s("td",[s("code",[t._v("docker-compose logs -f web")])]),t._v(" "),s("td",[t._v("查看 web 容器的实时日志")])]),t._v(" "),s("tr",[s("td",[s("code",[t._v("docker-compose down")])]),t._v(" "),s("td",[t._v("停止所有由 "),s("code",[t._v("up")]),t._v(" 命令启动的容器")])]),t._v(" "),s("tr",[s("td",[s("code",[t._v("docker-compose down -v")])]),t._v(" "),s("td",[t._v("停止所有由 "),s("code",[t._v("up")]),t._v(" 命令启动的容器，并移除数据卷")])]),t._v(" "),s("tr",[s("td",[s("code",[t._v("docker-compose restart web")])]),t._v(" "),s("td",[t._v("重新启动停止的 web 服务容器")])]),t._v(" "),s("tr",[s("td",[s("code",[t._v("docker-compose pause web")])]),t._v(" "),s("td",[t._v("暂停 web 容器")])]),t._v(" "),s("tr",[s("td",[s("code",[t._v("docker-compose unpause web")])]),t._v(" "),s("td",[t._v("恢复 web 容器")])]),t._v(" "),s("tr",[s("td",[s("code",[t._v("docker-compose rm web")])]),t._v(" "),s("td",[t._v("删除 web 容器（在删除前必须先停止容器）")])]),t._v(" "),s("tr",[s("td",[s("code",[t._v("docker-compose top")])]),t._v(" "),s("td",[t._v("查看各个服务容器内正在运行的进程")])])])]),t._v(" "),s("h3",{attrs:{id:"docker-compose-yml"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#docker-compose-yml"}},[t._v("#")]),t._v(" docker-compose.yml")]),t._v(" "),s("p",[t._v("使用 Docker Compose 配置的多个容器服务的示例。其中包括了 MySQL 和 Redis 服务。每个服务都有相应的配置，包括容器名称、镜像、构建信息、环境变量、挂载目录、端口映射等。通过 Docker Compose 可以方便地管理和启动这些容器服务。")]),t._v(" "),s("div",{staticClass:"language-yml extra-class"},[s("pre",{pre:!0,attrs:{class:"language-yml"}},[s("code",[s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("version")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"2.1"')]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("services")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("lottery-mysql")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("container_name")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" lottery"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v("mysql\n    "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("image")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" mysql"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("5.7")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("build")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("context")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" ./mysql   "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# MySQL服务的构建上下文路径")]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("dockerfile")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" Dockerfile   "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# MySQL服务的Dockerfile路径")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("ports")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"3306:3306"')]),t._v("   "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 映射MySQL服务的默认端口号")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("volumes")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" ./mysql/conf"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("/etc/mysql/conf.d   "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 挂载MySQL服务的配置文件目录")]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" ./mysql/logs"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("/logs   "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 挂载MySQL服务的日志目录")]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" ./mysql/data"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("/var/lib/mysql   "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 挂载MySQL服务的数据目录")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("command")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'mysqld'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'--innodb-buffer-pool-size=80M'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'--character-set-server=utf8mb4'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'--collation-server=utf8mb4_bin'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'--default-time-zone=+8:00'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'--lower-case-table-names=1'")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("   "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 定义MySQL服务的启动命令及参数")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("environment")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("MYSQL_ROOT_PASSWORD")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'自己的数据库密码 '")]),t._v("   "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 设置MySQL服务的root用户密码，请替换为你自己的密码")]),t._v("\n\n  "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("lottery-redis")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("container_name")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" lottery"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v("redis\n    "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("image")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" redis\n    "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("build")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("context")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" ./redis   "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# Redis服务的构建上下文路径")]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("dockerfile")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" Dockerfile   "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# Redis服务的Dockerfile路径")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("ports")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"6379:6379"')]),t._v("   "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 映射Redis服务的默认端口号")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("volumes")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" ./redis/conf/redis.conf"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("/home/lottery/redis/redis.conf   "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 挂载Redis服务的配置文件")]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" ./redis/data"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("/data   "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 挂载Redis服务的数据目录")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("command")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" redis"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v("server /home/lottery/redis/redis.conf   "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 定义Redis服务的启动命令及参数")]),t._v("\n")])])]),s("h2",{attrs:{id:"容器数据卷"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#容器数据卷"}},[t._v("#")]),t._v(" 容器数据卷")]),t._v(" "),s("h3",{attrs:{id:"概述-2"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#概述-2"}},[t._v("#")]),t._v(" 概述")]),t._v(" "),s("blockquote",[s("p",[t._v("为了防止在删除容器的时候造成数据丢失，Docker 提供了数据卷（Volume）这个功能，数据卷是目录或文件，存在于一个或多个容器中，由 Docker 挂载到容器里。\n卷的设计目的就是数据的持久化，完全独立于容器的生存周期，因此 Docker 不会在容器删除时删除其挂载的数据卷。")])]),t._v(" "),s("h3",{attrs:{id:"特点-2"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#特点-2"}},[t._v("#")]),t._v(" 特点")]),t._v(" "),s("ol",[s("li",[t._v("数据卷可在容器之间共享或重用数据")]),t._v(" "),s("li",[t._v("卷中的更改可以直接生效")]),t._v(" "),s("li",[t._v("数据卷中的更改不会包含在镜像的更新中")]),t._v(" "),s("li",[t._v("数据卷的生命周期一直持续到没有容器使用它为止")])]),t._v(" "),s("h3",{attrs:{id:"使用数据卷"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#使用数据卷"}},[t._v("#")]),t._v(" 使用数据卷")]),t._v(" "),s("h4",{attrs:{id:"_1-容器中使用命令来添加"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_1-容器中使用命令来添加"}},[t._v("#")]),t._v(" 1. 容器中使用命令来添加")]),t._v(" "),s("div",{staticClass:"language-shell extra-class"},[s("pre",{pre:!0,attrs:{class:"language-shell"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("## 命令")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("docker")]),t._v(" run "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("-it")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("-v")]),t._v(" 宿主机绝对路径目录:容器内目录 镜像名\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("## 测试")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("docker")]),t._v(" run "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("-it")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("-v")]),t._v(" /home/ceshi:/home centos /bin/bash\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("## 匿名挂载 -v 容器内路径")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("docker")]),t._v(" run "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("-d")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("-P")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("--name")]),t._v(" nginx01 "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("-v")]),t._v(" /etc/nginx nginx\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("## 匿名挂载的缺点，就是不好维护，通常使用命令 docker volume维护")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("docker")]),t._v(" volume "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("ls")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("## 具名挂载 -v 卷名:/容器内路径")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("docker")]),t._v(" run "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("-d")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("-P")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("--name")]),t._v(" nginx02 "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("-v")]),t._v(" nginxconfig:/etc/nginx nginx\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("## 查看挂载的路径")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("docker")]),t._v(" volume inspect nginxconfig\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"CreatedAt"')]),s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"2020-05-13T17:23:00+08:00"')]),t._v(",\n    "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"Driver"')]),s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"local"')]),t._v(",\n    "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"Labels"')]),s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v(":")]),t._v(" null,\n    "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"Mountpoint"')]),s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"/var/lib/docker/volumes/nginxconfig/_data"')]),t._v(",\n    "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"Name"')]),s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"nginxconfig"')]),t._v(",\n    "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"Options"')]),s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v(":")]),t._v(" null,\n    "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"Scope"')]),s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"local"')]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("## 所有的docker容器内的卷，没有指定目录的情况下都是在/var/1ib/docker/volumes/xxxx/_data")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("## 怎么判断挂载的是卷名而不是本机目录名？ 不是/开始就是卷名，是/开始就是目录名")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("## 指定容器对我们挂载出来的内容的读写权限")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("docker")]),t._v(" run "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("-d")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("-P")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("--name")]),t._v(" nginx02 "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("-v")]),t._v(" nginxconfig:/etc/nginx:ro nginx\n"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("docker")]),t._v(" run "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("-d")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("-P")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("--name")]),t._v(" nginx02 "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("-v")]),t._v(" nginxconfig:/etc/nginx:rw nginx\n")])])]),s("h4",{attrs:{id:"_2-docker-file-添加数据卷"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_2-docker-file-添加数据卷"}},[t._v("#")]),t._v(" 2. Docker File 添加数据卷")]),t._v(" "),s("blockquote",[s("p",[t._v("DockerFile 是用来构建 Docker 镜像的构建文件，是由一些列命令和参数构成的脚本。")])]),t._v(" "),s("p",[s("strong",[t._v("测试")]),t._v("：")]),t._v(" "),s("div",{staticClass:"language-shell extra-class"},[s("pre",{pre:!0,attrs:{class:"language-shell"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("## 1、我们在宿主机 /home 目录下新建一个 docker-test-volume文件夹")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("mkdir")]),t._v(" docker-test-volume\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("## 2、编写DockerFile文件")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("cd")]),t._v(" docker-test-volume\n"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("vim")]),t._v(" dockerfile1\n"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("cat")]),t._v(" dockerfile1\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("## volume test")]),t._v("\nFROM centos\nVOLUME "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"/dataVolumeContainer1"')]),t._v(","),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"/dataVolumeContainer2"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\nCMD "),s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("echo")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"-------end------"')]),t._v("\nCMD /bin/bash\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("## 3、build后生成镜像，获得一个新镜像 kuangshen/centos")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("docker")]),t._v(" build "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("-f")]),t._v(" /home/docker-test-volume/dockerfile1 "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("-t")]),t._v(" kuangshen/centos. "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#注意最后有个.")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("## 4、启动容器")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("root@kuangshen docker-test-volume"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("## docker run -it 0e97e1891a3d /bin/bash #启动容器")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("root@f5824970eefc /"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("## ls -l")]),t._v("\ntotal "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("56")]),t._v("\nlrwxrwxrwx "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),t._v(" root root "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("7")]),t._v(" May "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("11")]),t._v("  "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("2019")]),t._v(" bin -"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" usr/bin\ndrwxr-xr-x "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("2")]),t._v(" root root "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("4096")]),t._v(" May "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("11")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("11")]),t._v(" :55 dataVolumeContainer1 "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("## 数据卷目录")]),t._v("\ndrwxr-xr-x "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("2")]),t._v(" root root "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("4096")]),t._v(" May "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("11")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("11")]),t._v(" :55 dataVolumeContainer2 "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("## 数据卷目录")]),t._v("\ndrwxr-xr-x "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("5")]),t._v(" root root "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("360")]),t._v(" May "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("11")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("11")]),t._v(" :55 dev\ndrwxr-xr-x "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),t._v(" root root "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("4096")]),t._v(" May "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("11")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("11")]),t._v(" :55 etc\ndrwxr-xr-x "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("2")]),t._v(" root root "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("4096")]),t._v(" May "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("11")]),t._v("  "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("2019")]),t._v(" home\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("..")]),t._v(".\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("## 问题:通过上述步骤，容器内的卷目录地址就已经知道了，但是对应的主机目录地址在哪里呢？")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("## 5、我们在数据卷中新建一个文件")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("root@f5824970eefc dataVolumeContainer1"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("## pwd")]),t._v("\n/dataVolumeContainer1\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("root@f5824970eefc dataVolumeContainer1"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("## touch container.txt")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("root@f5824970eefc dataVolumeContainer1"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("## ls -l")]),t._v("\ntotal "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),t._v("\n-rw-r--r-- "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),t._v(" root root "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),t._v(" May "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("11")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("11")]),t._v(" :58 container.txt\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("## 6、查看下这个容器的信息")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("docker")]),t._v(" inspect 0e97e1891a3d\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("## 查看输出的Volumes")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"Volumes"')]),s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"/dataVolumeContainer1"')]),s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(",\n"),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"/dataVolumeContainer2"')]),s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(",\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("## 7、这个卷在主机对应的默认位置")]),t._v("\n")])])]),s("p",[s("img",{attrs:{src:"https://wwp-study-notes.oss-cn-nanjing.aliyuncs.com/imgs/Docker/9.png",alt:"9"}})]),t._v(" "),s("blockquote",[s("p",[t._v("注意：如果访问出现了 cannot open directory: Permission denied\n解决办法：在挂载目录后多加一个 --privileged=true 参数即可")])]),t._v(" "),s("h3",{attrs:{id:"数据卷容器"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#数据卷容器"}},[t._v("#")]),t._v(" 数据卷容器")]),t._v(" "),s("blockquote",[s("p",[t._v("命名的容器挂载数据卷，其他容器通过挂载这个（父容器）实现数据共享，挂载数据卷的容器，称之为数据卷容器。"),s("br"),t._v("\n我们使用上一步的镜像：kuangshen/centos 为模板，运行容器 docker01，docker02，docker03，他们都会具有容器卷")])]),t._v(" "),s("div",{staticClass:"language-shell extra-class"},[s("pre",{pre:!0,attrs:{class:"language-shell"}},[s("code",[s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"/dataVolumeContainer1"')]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"/dataVolumeContainer2"')]),t._v("\n")])])]),s("p",[t._v("我们来测试下，容器间传递共享")]),t._v(" "),s("p",[s("strong",[t._v("1、先启动一个父容器 docker01，然后在 dataVolumeContainer2 新增文件")])]),t._v(" "),s("p",[s("img",{attrs:{src:"https://wwp-study-notes.oss-cn-nanjing.aliyuncs.com/imgs/Docker/10.png",alt:"10"}})]),t._v(" "),s("p",[s("img",{attrs:{src:"https://wwp-study-notes.oss-cn-nanjing.aliyuncs.com/imgs/Docker/11.png",alt:"11"}})]),t._v(" "),s("blockquote",[s("p",[t._v("退出不停止：ctrl+P+Q")])]),t._v(" "),s("p",[s("strong",[t._v("2、创建 docker02，docker03 让他们继承 docker01 --volumes-from")])]),t._v(" "),s("div",{staticClass:"language-shell extra-class"},[s("pre",{pre:!0,attrs:{class:"language-shell"}},[s("code",[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("root@kuangshen docker-test-volume"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("## docker run -it --name docker02 --volumes-from docker01 kuangshen/centos")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("root@ea4c82779077 /"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("## cd /dataVolumeContainer2")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("root@ea4c82779077 dataVolumeContainer2"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("## ls")]),t._v("\ndocker01.txt\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("root@95164598b306 dataVolumeContainer2"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("## touch docker02.txt")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("root@95164598b306 dataVolumeContainer2"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("## ls")]),t._v("\ndocker01.txt docker02.txt\n\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("root@kuangshen docker-test-volume"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("## docker run -it --name docker03 --volumes-from docker01 kuangshen/centos")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("root@ea4c82779077 /"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("## cd /dataVolumeContainer2")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("root@ea4c82779077 dataVolumeContainer2"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("## ls")]),t._v("\ndocker01.txt docker02.txt\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("root@95164598b306 dataVolumeContainer2"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("## touch docker03.txt")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("root@95164598b306 dataVolumeContainer2"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("## ls")]),t._v("\ndocker01.txt docker02.txt docker03.txt\n")])])]),s("p",[s("strong",[t._v("3、回到 docker01 发现可以看到 02 和 03 添加的共享文件")])]),t._v(" "),s("div",{staticClass:"language-shell extra-class"},[s("pre",{pre:!0,attrs:{class:"language-shell"}},[s("code",[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("root@kuangshen docker-test-volume"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("## docker attach docker01")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("root@799b6ea5db7c dataVolumeContainer2"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("## ls -l")]),t._v("\ntotal "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),t._v("\n-rw-r--r-- "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),t._v(" root root "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),t._v(" May "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("11")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("13")]),t._v(" :20 docker01.txt\n-rw-r--r-- "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),t._v(" root root "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),t._v(" May "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("11")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("13")]),t._v(" :22 docker02.txt\n-rw-r--r-- "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),t._v(" root root "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),t._v(" May "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("11")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("13")]),t._v(" :24 docker03.txt\n")])])]),s("p",[s("strong",[t._v("4、删除 docker01，docker02 修改后 docker03 还能不能访问")])]),t._v(" "),s("div",{staticClass:"language-shell extra-class"},[s("pre",{pre:!0,attrs:{class:"language-shell"}},[s("code",[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("root@kuangshen docker-test-volume"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("## docker rm -f docker01")]),t._v("\ndocker01\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("root@kuangshen docker-test-volume"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("## docker attach docker02")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("root@ea4c82779077 dataVolumeContainer2"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("## ls -l")]),t._v("\ntotal "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),t._v("\n-rw-r--r-- "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),t._v(" root root "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),t._v(" May "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("11")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("13")]),t._v(" :20 docker01.txt\n-rw-r--r-- "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),t._v(" root root "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),t._v(" May "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("11")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("13")]),t._v(" :22 docker02.txt\n-rw-r--r-- "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),t._v(" root root "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),t._v(" May "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("11")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("13")]),t._v(" :24 docker03.txt\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("root@ea4c82779077 dataVolumeContainer2"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("## touch docker02-update.txt")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("root@ea4c82779077 dataVolumeContainer2"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("## ls -a")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v(".")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("..")]),t._v(" docker01.txt docker02.txt docker02-update.txt docker03.txt\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("## Ctrl+P+Q 退出容器")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("root@kuangshen docker-test-volume"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("## docker attach docker03")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("root@95164598b306 dataVolumeContainer2"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("## ls -l")]),t._v("\ntotal "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),t._v("\n-rw-r--r-- "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),t._v(" root root "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),t._v(" May "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("11")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("13")]),t._v(" :20 docker01.txt\n-rw-r--r-- "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),t._v(" root root "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),t._v(" May "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("11")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("13")]),t._v(" :22 docker02.txt\n-rw-r--r-- "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),t._v(" root root "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),t._v(" May "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("11")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("13")]),t._v(" :29 docker02-update.txt\n-rw-r--r-- "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),t._v(" root root "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),t._v(" May "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("11")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("13")]),t._v(" :24 docker03.txt\n")])])]),s("p",[s("strong",[t._v("5、删除 docker02 ，docker03 还能不能访问")])]),t._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("root@kuangshen docker-test-volume"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("## docker ps")]),t._v("\nCONTAINER ID IMAGE\n95164598b306 kuangshen/centos\nea4c82779077 kuangshen/centos\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("root@kuangshen docker-test-volume"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("## docker rm -f docker02")]),t._v("\ndocker02\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("root@kuangshen docker-test-volume"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("## docker attach docker03")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("root@95164598b306 dataVolumeContainer2"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("## ls -l")]),t._v("\ntotal "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),t._v("\n-rw-r--r-- "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),t._v(" root root "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),t._v(" May "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("11")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("13")]),t._v(" :20 docker01.txt\n-rw-r--r-- "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),t._v(" root root "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),t._v(" May "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("11")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("13")]),t._v(" :22 docker02.txt\n-rw-r--r-- "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),t._v(" root root "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),t._v(" May "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("11")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("13")]),t._v(" :29 docker02-update.txt\n-rw-r--r-- "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),t._v(" root root "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),t._v(" May "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("11")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("13")]),t._v(" :24 docker03.txt\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("root@95164598b306 dataVolumeContainer2"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("## touch docker03-update.txt")]),t._v("\n")])])]),s("p",[s("strong",[t._v("6、新建 docker04 继承 docker03，然后再删除 docker03，看下是否可以访问！")])]),t._v(" "),s("p",[s("img",{attrs:{src:"https://wwp-study-notes.oss-cn-nanjing.aliyuncs.com/imgs/Docker/12.png",alt:"12"}})]),t._v(" "),s("div",{staticClass:"language-shell extra-class"},[s("pre",{pre:!0,attrs:{class:"language-shell"}},[s("code",[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("root@2119f4f23a92 /"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("## cd dataVolumeContainer2")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("root@2119f4f23a92 dataVolumeContainer2"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("## ls -l")]),t._v("\ntotal "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),t._v("\n-rw-r--r-- "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),t._v(" root root "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),t._v(" May "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("11")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("13")]),t._v(" :20 docker01.txt\n-rw-r--r-- "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),t._v(" root root "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),t._v(" May "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("11")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("13")]),t._v(" :22 docker02.txt\n-rw-r--r-- "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),t._v(" root root "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),t._v(" May "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("11")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("13")]),t._v(" :29 docker02-update.txt\n-rw-r--r-- "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),t._v(" root root "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),t._v(" May "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("11")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("13")]),t._v(" :32 docker03-update.txt\n-rw-r--r-- "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),t._v(" root root "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),t._v(" May "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("11")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("13")]),t._v(" :24 docker03.txt\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("## 查看当前运行的容器")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("root@kuangshen docker-test-volume"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("## docker ps")]),t._v("\nCONTAINER ID IMAGE NAMES\n2119f4f23a92 kuangshen/centos docker04\n95164598b306 kuangshen/centos docker03\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("## 继续删除docker03")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("root@kuangshen docker-test-volume"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("## docker rm -f docker03")]),t._v("\ndocker03\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("root@kuangshen docker-test-volume"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("## docker attach docker04")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("root@2119f4f23a92 dataVolumeContainer2"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("## ls -l")]),t._v("\ntotal "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),t._v("\n-rw-r--r-- "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),t._v(" root root "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),t._v(" May "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("11")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("13")]),t._v(" :20 docker01.txt\n-rw-r--r-- "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),t._v(" root root "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),t._v(" May "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("11")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("13")]),t._v(" :22 docker02.txt\n-rw-r--r-- "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),t._v(" root root "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),t._v(" May "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("11")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("13")]),t._v(" :29 docker02-update.txt\n-rw-r--r-- "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),t._v(" root root "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),t._v(" May "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("11")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("13")]),t._v(" :32 docker03-update.txt\n-rw-r--r-- "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),t._v(" root root "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),t._v(" May "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("11")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("13")]),t._v(" :24 docker03.txt\n")])])]),s("p",[s("strong",[t._v("7、总结")])]),t._v(" "),s("blockquote",[s("p",[t._v("容器之间配置信息的传递，数据卷的生命周期一直持续到没有容器使用它为止。"),s("br"),t._v("\n存储在本机的文件则会一直保留！")])]),t._v(" "),s("h2",{attrs:{id:"docker-网络讲解"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#docker-网络讲解"}},[t._v("#")]),t._v(" Docker 网络讲解")]),t._v(" "),s("h3",{attrs:{id:"docker0-原理"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#docker0-原理"}},[t._v("#")]),t._v(" Docker0 原理")]),t._v(" "),s("ol",[s("li",[t._v("每一个安装了 Docker 的 linux 主机都有一个 docker0 的虚拟网卡。这是个桥接网卡，使用了 veth-pair 技术！")]),t._v(" "),s("li",[t._v("每启动一个容器，linux 主机就会多了一个虚拟网卡。")])]),t._v(" "),s("blockquote",[s("p",[t._v("启动两个 tomcat 容器观察：\ntomcat01 --- linux 主机 vethc8584ea@if122 ---- 容器内 eth0@if123\ntomcat02 --- linux 主机 veth021eeea@if124 ---- 容器内 eth0@if125\n结论**：容器和容器之间可以通过 ip 互相访问的**。")])]),t._v(" "),s("p",[s("strong",[t._v("网络模型图")])]),t._v(" "),s("p",[s("img",{attrs:{src:"https://wwp-study-notes.oss-cn-nanjing.aliyuncs.com/imgs/Docker/22.png",alt:"22"}})]),t._v(" "),s("blockquote",[s("p",[t._v("结论：tomcat1 和 tomcat2 共用一个路由器。就是 docker0。任何一个容器启动默认都是 docker0 网络。"),s("br"),t._v("\ndocker 默认会给容器分配一个可用 ip。"),s("br")])]),t._v(" "),s("h3",{attrs:{id:"link-不推荐"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#link-不推荐"}},[t._v("#")]),t._v(" --Link（不推荐）")]),t._v(" "),s("p",[t._v("如何通过容器名进行访问，实现高可用性")]),t._v(" "),s("div",{staticClass:"language-shell extra-class"},[s("pre",{pre:!0,attrs:{class:"language-shell"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("## 使用 --link")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("docker")]),t._v(" run "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("-d")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("-P")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("--name")]),t._v(" tomcat03 "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("--link")]),t._v(" tomcat02 tomcat\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("## 这个时候，就可以使用tomcat03 ping通tomcat02 了，反之不可行")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("docker")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("exec")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("-it")]),t._v(" tomcat03 "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("ping")]),t._v(" tomcat02\n")])])]),s("p",[s("strong",[t._v("查看 tomcat03 中的 host 配置文件")])]),t._v(" "),s("div",{staticClass:"language-shell extra-class"},[s("pre",{pre:!0,attrs:{class:"language-shell"}},[s("code",[s("span",{pre:!0,attrs:{class:"token function"}},[t._v("docker")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("exec")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("-it")]),t._v(" tomcat03 "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("cat")]),t._v(" /etc/hosts\n"),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("172")]),t._v(" .18.0.3 tomcat02 b80da266a3ad  "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("## 发现tomcat2直接被写在这里")]),t._v("\n")])])]),s("blockquote",[s("p",[t._v("原理：--link 的时候，直接把需要 link 的主机的域名和 ip 直接配置到了 hosts 文件中。")])]),t._v(" "),s("h3",{attrs:{id:"自定义网络"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#自定义网络"}},[t._v("#")]),t._v(" 自定义网络")]),t._v(" "),s("h4",{attrs:{id:"基本命令"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#基本命令"}},[t._v("#")]),t._v(" 基本命令")]),t._v(" "),s("table",[s("thead",[s("tr",[s("th",[t._v("命令")]),t._v(" "),s("th",[t._v("描述")])])]),t._v(" "),s("tbody",[s("tr",[s("td",[s("code",[t._v("docker network connect")])]),t._v(" "),s("td",[t._v("连接容器到网络")])]),t._v(" "),s("tr",[s("td",[s("code",[t._v("docker network create")])]),t._v(" "),s("td",[t._v("创建一个新的网络")])]),t._v(" "),s("tr",[s("td",[s("code",[t._v("docker network disconnect")])]),t._v(" "),s("td",[t._v("断开容器与网络的连接")])]),t._v(" "),s("tr",[s("td",[s("code",[t._v("docker network inspect")])]),t._v(" "),s("td",[t._v("查看网络的详细信息")])]),t._v(" "),s("tr",[s("td",[s("code",[t._v("docker network ls")])]),t._v(" "),s("td",[t._v("列出当前存在的网络")])]),t._v(" "),s("tr",[s("td",[s("code",[t._v("docker network prune")])]),t._v(" "),s("td",[t._v("清理无用的网络")])]),t._v(" "),s("tr",[s("td",[s("code",[t._v("docker network rm")])]),t._v(" "),s("td",[t._v("删除一个或多个网络")])])])]),t._v(" "),s("h4",{attrs:{id:"网络模式"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#网络模式"}},[t._v("#")]),t._v(" 网络模式")]),t._v(" "),s("p",[s("img",{attrs:{src:"https://wwp-study-notes.oss-cn-nanjing.aliyuncs.com/imgs/Docker/23.png",alt:"23"}})]),t._v(" "),s("h4",{attrs:{id:"自定义网卡"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#自定义网卡"}},[t._v("#")]),t._v(" 自定义网卡")]),t._v(" "),s("p",[t._v("在容器创建时使用自定义网络")]),t._v(" "),s("div",{staticClass:"language-shell extra-class"},[s("pre",{pre:!0,attrs:{class:"language-shell"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[t._v('## 自定义创建的默认default "bridge"')]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("## 自定义创建一个网络网络")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("docker")]),t._v(" network create "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("--driver")]),t._v(" bridge "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("--subnet")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("192.168")]),t._v(".0.0/16 "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("--gateway")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("192.168")]),t._v(".0.1 mynet\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("## 查看详情")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("docker")]),t._v(" network inspect mynet\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("## 启动容器测试，使用 mynet！")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("docker")]),t._v(" run "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("-d")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("-P")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("--name")]),t._v(" tomcat-net-01 "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("--net")]),t._v(" mynet tomcat\n"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("docker")]),t._v(" run "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("-d")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("-P")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("--name")]),t._v(" tomcat-net-02 "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("--net")]),t._v(" mynet tomcat\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("## 再来查看下")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("docker")]),t._v(" network inspect mynet\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("## 都可以ping通")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("docker")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("exec")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("-it")]),t._v(" tomcat-net-01 "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("ping")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("192.168")]),t._v(".0.3\n"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("docker")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("exec")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("-it")]),t._v(" tomcat-net-01 "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("ping")]),t._v(" tomcat-net-02\n")])])]),s("h3",{attrs:{id:"网络连通"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#网络连通"}},[t._v("#")]),t._v(" 网络连通")]),t._v(" "),s("p",[s("img",{attrs:{src:"https://wwp-study-notes.oss-cn-nanjing.aliyuncs.com/imgs/Docker/24.png",alt:"24"}})]),t._v(" "),s("blockquote",[s("p",[t._v("docker0 和自定义网络是不连通的，使用自定义网络的好处就是网络隔离。"),s("br"),t._v("\n如上图，如何让 tomcat-net-01 访问 tomcat1？"),s("br"),t._v("\n使用 docker network connect [OPTIONS] NETWORK CONTAINER 连接两个网络。")])]),t._v(" "),s("div",{staticClass:"language-shell extra-class"},[s("pre",{pre:!0,attrs:{class:"language-shell"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("## 启动默认的容器，在docker0网络下")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("docker")]),t._v(" run "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("-d")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("-P")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("--name")]),t._v(" tomcat01 tomcat\n"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("docker")]),t._v(" run "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("-d")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("-P")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("--name")]),t._v(" tomcat02 tomcat\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("## 连接一个容器到一个网络，打通mynet-docker0")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("## 命令 docker network connect [OPTIONS] NETWORK CONTAINER")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("docker")]),t._v(" network connect mynet tomcat01\n"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("docker")]),t._v(" network inspect mynet\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("## tomcat01 可以ping通了")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("docker")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("exec")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("-it")]),t._v(" tomcat01 "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("ping")]),t._v(" tomcat-net-01\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("## tomcat02 依旧ping不通，大家应该就理解了")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("docker")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("exec")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("-it")]),t._v(" tomcat02 "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("ping")]),t._v(" tomcat-net-01\n")])])]),s("h2",{attrs:{id:"idea-整合-docker"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#idea-整合-docker"}},[t._v("#")]),t._v(" IDEA 整合 Docker")]),t._v(" "),s("ol",[s("li",[t._v("打 jar 包")]),t._v(" "),s("li",[t._v("打包镜像")])]),t._v(" "),s("p",[s("strong",[t._v("在项目下编写 Dockerfile 文件，将打包好的 jar 包拷贝到 Dockerfile 同级目录")])]),t._v(" "),s("div",{staticClass:"language-shell extra-class"},[s("pre",{pre:!0,attrs:{class:"language-shell"}},[s("code",[t._v("FROM java:8\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("## 服务器只有dockerfile和jar在同级目录")]),t._v("\nCOPY *.jar /app.jar\n\nCMD "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"--server.port=8080"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("## 指定容器内要暴露的端口")]),t._v("\nEXPOSE "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("8080")]),t._v("\n\nENTRYPOINT "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"java"')]),t._v(","),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"-jar"')]),t._v(","),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"/app.jar"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n")])])]),s("p",[s("strong",[t._v("将 Dockerfile 和 项目的 jar 包上传到 linux 服务器上，构建运行")])]),t._v(" "),s("div",{staticClass:"language-shell extra-class"},[s("pre",{pre:!0,attrs:{class:"language-shell"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("## 构建镜像")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("docker")]),t._v(" build "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("-t")]),t._v(" idea-ks.\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("## 查看镜像")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("docker")]),t._v(" images\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("## 运行")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("docker")]),t._v(" run "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("-d")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("-P")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("--name")]),t._v(" idea-ks idea-ks\n"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("docker")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("ps")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("## 测试访问")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("curl")]),t._v(" localhost:32779\n"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("curl")]),t._v(" localhost:32779/hello\n")])])]),s("h2",{attrs:{id:"可视化"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#可视化"}},[t._v("#")]),t._v(" 可视化")]),t._v(" "),s("h3",{attrs:{id:"portainer-先用这个"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#portainer-先用这个"}},[t._v("#")]),t._v(" Portainer（先用这个）")]),t._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("docker run -d -p 8088:9000 \\ --restart=always -v /var/run/docker.sock:/var/run/docker.sock -- privileged=true portainer/portainer\n")])])]),s("h3",{attrs:{id:"rancher-ci-cd-再用这个"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#rancher-ci-cd-再用这个"}},[t._v("#")]),t._v(" Rancher（CI/CD 再用这个）")]),t._v(" "),s("div",{staticClass:"language-shell extra-class"},[s("pre",{pre:!0,attrs:{class:"language-shell"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#安装rancher-server")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("docker")]),t._v(" run "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("--name")]),t._v(" rancher-server "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("-p")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("8000")]),t._v(":8080 "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("-v")]),t._v(" /etc/localtime:/etc/localtime:ro "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("-d")]),t._v(" rancher/server\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#安装agent")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("docker")]),t._v(" run "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("--rm")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("--privileged")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("-v")]),t._v(" /var/run/docker.sock:/var/run/docker.sock "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("-v")]),t._v(" /var/lib/rancher:/var/lib/rancher rancher/agent:v1.2.11\nhttp://39.101.191.131:8000/v1/scripts/D3DBD43F263109BB881F:1577750400000:7M0y BzCw4XSxJklD7TpysYIpI\n")])])]),s("ol",[s("li",[t._v("介绍：")])]),t._v(" "),s("blockquote",[s("p",[t._v("Portainer 是 Docker 的图形化管理工具，提供状态显示面板、应用模板快速部署、容器镜像网络数据卷\n的基本操作（包括上传下载镜像，创建容器等操作）、事件日志显示、容器控制台操作、Swarm 集群和\n服务等集中管理和操作、登录用户管理和控制等功能。功能十分全面，基本能满足中小型单位对容器管\n理的全部需求。\n如果仅有一个 docker 宿主机，则可使用单机版运行，Portainer 单机版运行十分简单，只需要一条语句即\n可启动容器，来管理该机器上的 docker 镜像、容器等数据。")])]),t._v(" "),s("div",{staticClass:"language-shell extra-class"},[s("pre",{pre:!0,attrs:{class:"language-shell"}},[s("code",[s("span",{pre:!0,attrs:{class:"token function"}},[t._v("docker")]),t._v(" run "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("-d")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("-p")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("8088")]),t._v(":9000 "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("--restart")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("always "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("-v")]),t._v(" /var/run/docker.sock:/var/run/docker.sock -- "),s("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("privileged")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("true portainer/portainer\n")])])]),s("ol",{attrs:{start:"2"}},[s("li",[s("p",[t._v("访问方式：http://IP:8088")])]),t._v(" "),s("li",[s("p",[t._v("首次登陆需要注册用户，给 admin 用户设置密码：")])])]),t._v(" "),s("p",[s("img",{attrs:{src:"https://wwp-study-notes.oss-cn-nanjing.aliyuncs.com/imgs/Docker/3.png",alt:"3"}})]),t._v(" "),s("ol",[s("li",[t._v("单机版这里选择 local 即可，选择完毕，点击 Connect 即可连接到本地 docker：")])]),t._v(" "),s("p",[s("img",{attrs:{src:"https://wwp-study-notes.oss-cn-nanjing.aliyuncs.com/imgs/Docker/4.png",alt:"4"}})]),t._v(" "),s("ol",{attrs:{start:"5"}},[s("li",[t._v("登录成功！")])]),t._v(" "),s("p",[s("img",{attrs:{src:"https://wwp-study-notes.oss-cn-nanjing.aliyuncs.com/imgs/Docker/5.png",alt:"5"}})])])}),[],!1,null,null,null);s.default=n.exports}}]);